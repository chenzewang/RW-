<!--
 * @Author: your name
 * @Date: 2020-03-19 15:54:50
 * @LastEditTime: 2020-03-19 16:16:43
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: \RW 笔记\计算机网络\tcp\tcp为什么是可靠的.md
 -->
tcp无差错，不丢失，不重复，且按序到达

# 每个数据报都有ack/seq标志
这关系两个机制：
超时重传
快速重传
## 超时重传
在计时器时间内收不到`ack`确认号会重新发送
## 快速重传
[TCP的快速重传机制](https://blog.csdn.net/whgtheone/article/details/80983882)

数据报失序到达时，接收方发送三个连续ack

# 流量控制（滑动窗口）
发送方通过维持一个发送滑动窗口来确保不会发生由于发送方报文发送太快接收方无法及时处理的问题。此时发送方的报文分为四类， 第一类是已经发送并且得到接收方确认的报文，第二类是已经发送但是没有接收到确认的报文，第三类是发送方还没发送，但是滑动窗口还足够巨大，允许被发送的报文， 第四类是还没发送并且窗口已经被占满，不允许发送的报文。 一般来说，滑动窗口的最左端都是介于第一类跟第二类报文的分界线，最右端是第三类跟第四类报文的分界线。


a、停等协议。 滑动窗口的大小为1， 每个发送报文都要等到被确认以后，发送方才继续发送下一个报文。

b、后退n步协议。 该协议下，滑动窗口大于1，发送方可以一直发送报文，但是当接收到接收方发送的三个连续的同一序列号的ACK报文时，说明该序列号的报文是已经丢失的，那么此时重发该丢失报文以及该报文以后的报文（包括那些已经发送的）。

c、选择重传。在后退n步协议当中，如果某个报文丢失。那么将要重新发送这个丢失报文及以后的所有报文（包括已经发送的），选择重传协议不用做此要求，只要重新发送丢失的报文即可。


# 拥塞控制

cwnd：拥塞窗口大小

ssthreshold: 拥塞阈值 （该阈值是对网络状况的一个预估，决定在拥塞窗口多大的时候采取怎样的策略，它的初始化一般是一个估计，一般都会给出）



现在可以看下这个拥塞控制机制包括哪几个策略

a、慢启动

此时一般是（记住是一般情况）cwnd<ssthreshold，此时cwnd呈指数形式增长，1、2、4、8、16、32...这种增长趋势

b、拥塞避免

此时一般cwnd>ssthreshold，此时cwnd呈线性增长，32、33、34、35...这种增长趋势

c、拥塞解决

此时一般是遇到了网络拥塞的状况，解决方法是拥塞阈值乘性减即ssthreshold=cwnd/2，cwnd=1，或者ssthreshold=cwnd/2，cwnd=ssthreshold，这两种情况在后面说明

d、快速恢复

一般是启用拥塞结局策略之后，根据不同的情况，进入慢启动或者拥塞避免阶段。

